# mnt | ~~pool~~ | ~~mount~~ | ~~media~~ | ~~data~~ | ~~disk~~ | ~~volume~~ | ~~public~~ | ~~drive~~ | ~~share~~ | ~~allaccess~~ | ~~ssd~~ | ~~hdd~~ | ~~flash~~ | ~~stick~~ | ~~floppy~~ | ~~cd~~ | ~~dvd~~ | ~~tape~~ | ~~vinyl~~ |
## nfs

Сначала необходимо смонтировать физический том (или файловую систему), затем настроить права доступа на точку монтирования, и только после этого настраивать экспорт NFS.
## Настройка NFS на Ubuntu

0. Монтирование
    ```sh
    sudo sudo chown nobody:nogroup /srv/nfs_share
    sudo mount /dev/md127 /mnt
    ```
2. Установите сервер NFS (Network File System) на вашем компьютере Ubuntu:

    ```shell
    sudo apt update
    sudo apt install nfs-kernel-server
    ```

3. Создайте директорию, которую вы хотите сделать доступной для других компьютеров. Например, создадим каталог `/srv/nfs_share`:

    ```shell
    sudo mkdir -p /mnt
    ```

4. Настройте права доступа к этой директории. Например, сделаем так, чтобы она была доступна для чтения и записи всем в сети:

    ```shell
    sudo chown -R nobody:nogroup /mnt
    sudo chmod -R 777 /mnt
    ```

   Обратите внимание, что это настройка безопасности, и в реальной среде вам следует настроить более строгие правила доступа.

5. Отредактируйте файл `/etc/exports`, чтобы указать, какие директории вы хотите сделать доступными через NFS. Добавьте строку в конец файла, указывающую директорию, IP-адрес или диапазон IP-адресов и разрешения доступа. Например:

    ```shell
    /mnt 192.168.0.0/24(rw,sync,no_subtree_check)
    ```

   В этом примере `/srv/nfs_share` разрешено для записи (rw) для всех устройств в сети с IP-адресами, начинающимися с `192.168.0`.

6. Перезапустите сервер NFS:

    ```shell
    sudo exportfs -a
    sudo systemctl restart nfs-kernel-server
    ```

Теперь ваш сервер NFS должен быть настроен и готов к использованию. На удаленных компьютерах, которым нужен доступ к вашей директории, вы можете монтировать ее с использованием команды `mount`. Например:

```shell
sudo mount -t nfs server_ip:/srv/nfs_share /место_монтирования
```

# NFS client OSX 
```sh
sudo mkdir -p /Volumes/nfs
# csrutil status
# csrutil disable
sudo mount -t nfs -o resvport 192.168.0.4:/mnt/00 /Volumes/nfs
```

# NFS client WINDOWS

# Инструкция по настройке NFS на Windows

### 1. Проверка NFS-клиента на Windows
Убедитесь, что компонент NFS установлен:
1. Откройте **Панель управления → Программы → Включение или отключение компонентов Windows**.
2. Найдите и установите **Клиент для NFS (Client for NFS)**.
3. Перезагрузите компьютер.

---

### 2. Настройка реестра Windows NFS-клиента
(Этот шаг необязателен, но может потребоваться для правильного маппинга пользователей).

#### Проверьте и настройте параметры:
1. Откройте реестр:
   - Нажмите `Win + R`, введите `regedit`, нажмите Enter.

2. Перейдите в раздел:
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ClientForNFS\CurrentVersion\Default

3. Создайте или измените параметры:
- **AnonymousUid**: DWORD, значение `0` (UID `0` соответствует `root` на сервере NFS).
- **AnonymousGid**: DWORD, значение `0`.

4. Закройте реестр и перезагрузите Windows.

---

### 3. Монтирование шары в Windows
Используйте следующую команду для монтирования:
```sh
mount -o anon,fileaccess=777 \\<IP-адрес>\путь_к_шаре X:
```

Пример:
```sh
mount -o anon,fileaccess=777 \\192.168.0.4\mnt\ X:
```

---

### 4. Альтернативный способ монтирования через `net use`
Если `mount` не работает, попробуйте использовать команду `net use`:
```sh
net use X: \\192.168.0.4\mnt /user:anonymous ""
```

---

### 5. Диагностика проблем
#### **Проверка подключения:**
1. Убедитесь, что Windows видит NFS-сервер:
```sh
showmount -e 192.168.0.4
```

#### **Проверка лога NFS-сервера (на Debian):**
1. Проверьте, не блокирует ли сервер доступ от Windows:
```sh
sudo journalctl -xe | grep nfs
```
2. Убедитесь, что запросы от Windows-клиента доходят до сервера.

---

### Команды для тестирования записи на шару:
1. Создайте тестовый файл:
```sh
echo "Test" > X:\testfile.txt
```

2. Удалите тестовый файл:
```sh
del X:\testfile.txt
```
[![image](https://github.com/43321999/RuntimeSetup/assets/16022391/0dba89e4-d45f-479f-96a1-c993c82b7869)<svg xmlns="http://www.w3.org/2000/svg" fill="none" aria-hidden="true" class="a-icon--logo-text flex h-32" style="width:118;height:32" viewBox="0 0 1180 320"><path fill="currentColor" d="M297.06 130.97a79.712 79.712 0 0 0-6.85-65.48c-17.46-30.4-52.56-46.04-86.84-38.68A79.747 79.747 0 0 0 143.24 0C108.2-.08 77.11 22.48 66.33 55.82a79.754 79.754 0 0 0-53.31 38.67c-17.59 30.32-13.58 68.54 9.92 94.54a79.712 79.712 0 0 0 6.85 65.48c17.46 30.4 52.56 46.04 86.84 38.68a79.687 79.687 0 0 0 60.13 26.8c35.06.09 66.16-22.49 76.94-55.86a79.754 79.754 0 0 0 53.31-38.67c17.57-30.32 13.55-68.51-9.94-94.51zM176.78 299.08a59.77 59.77 0 0 1-38.39-13.88c.49-.26 1.34-.73 1.89-1.07l63.72-36.8a10.36 10.36 0 0 0 5.24-9.07v-89.83l26.93 15.55c.29.14.48.42.52.74v74.39c-.04 33.08-26.83 59.9-59.91 59.97zM47.94 244.05a59.71 59.71 0 0 1-7.15-40.18c.47.28 1.3.79 1.89 1.13l63.72 36.8c3.23 1.89 7.23 1.89 10.47 0l77.79-44.92v31.1c.02.32-.13.63-.38.83L129.87 266c-28.69 16.52-65.33 6.7-81.92-21.95zM31.17 104.96c7-12.16 18.05-21.46 31.21-26.29 0 .55-.03 1.52-.03 2.2v73.61c-.02 3.74 1.98 7.21 5.23 9.06l77.79 44.91L118.44 224c-.27.18-.61.21-.91.08l-64.42-37.22c-28.63-16.58-38.45-53.21-21.95-81.89zm221.26 51.49-77.79-44.92 26.93-15.54c.27-.18.61-.21.91-.08l64.42 37.19c28.68 16.57 38.51 53.26 21.94 81.94a59.94 59.94 0 0 1-31.2 26.28v-75.81c.03-3.74-1.96-7.2-5.2-9.06zm26.8-40.34c-.47-.29-1.3-.79-1.89-1.13l-63.72-36.8a10.375 10.375 0 0 0-10.47 0l-77.79 44.92V92c-.02-.32.13-.63.38-.83l64.41-37.16c28.69-16.55 65.37-6.7 81.91 22a59.95 59.95 0 0 1 7.15 40.1zm-168.51 55.43-26.94-15.55a.943.943 0 0 1-.52-.74V80.86c.02-33.12 26.89-59.96 60.01-59.94 14.01 0 27.57 4.92 38.34 13.88-.49.26-1.33.73-1.89 1.07L116 72.67a10.344 10.344 0 0 0-5.24 9.06l-.04 89.79zM125.35 140 160 119.99l34.65 20V180L160 200l-34.65-20z"/></svg>](https://chat.openai.com/share/0126fbd2-3547-45f4-beaf-e18656f27d4d)
