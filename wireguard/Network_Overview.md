# Обзор сети и адресного плана

Эта инструкция описывает структуру сети, принципы адресации и обоснование задач.

## Адресный план

1. **fd00::/8** — используется для адресов узлов.
2. Для каждого узла выделяется `/64` подсеть:
   - Узел `01`: `fd01::/64`
   - Узел `1c`: `fd1c::/64`
   - …
3. Контейнеры получают адреса в рамках подсети узла:
   - Узел `01`: контейнеры — `fd01::1`, `fd01::2` и т.д.
   - Узел `1c`: контейнеры — `fd1c::1`, `fd1c::2` и т.д.
   - …

## Принципы проектирования

1. **Соответствие адресов именам узлов**  
   Адреса узлов должны совпадать с их именами для простоты восприятия и эксплуатации.  

2. **Простота ввода адресов**  
   IPv6-адреса узлов и контейнеров должны быть короткими и легко вводимыми вручную.  

3. **Логическая связанность**  
   - Узлы получают уникальные адреса в формате, напоминающем доменные зоны (`fd01::`, `fd1c::`).  
   - Контейнеры получают адреса в рамках подсети узла, напоминающие доменные имена в этих доменных зонах (`fd01::1`, `fd1c::1`).  

4. **Имена суперпользователей**  
   - Для работы роя выделяются два ключевых пользователя:  
     - **`fc`** — тестовая среда.  
     - **`fd`** — продакшн.  
   - Эти суперпользователи управляют всеми инстансами, обеспечивая удобный доступ к управлению разными средами.  

5. **Приоритет удобства над формальной правильностью**  
   Проект фокусируется на удобстве работы и поддержке, даже если это отклоняется от академических стандартов.  

## Примеры адресации

- Узел `01`: 
  - Узловой адрес: `fd01::`
  - Контейнеры: `fd01::1`, `fd01::2`...

- Узел `1c`: 
  - Узловой адрес: `fd1c::`
  - Контейнеры: `fd1c::1`, `fd1c::2`...

## Обоснование задач

1. **Читаемость и удобство**:
   - Простая структура адресов для ручного ввода и поддержки.
2. **Интеграция и масштабируемость**:
   - IPv6 обеспечивает обширное адресное пространство для каждого узла.
   - Легкость интеграции с Docker Swarm.
3. **Маршрутизация и NAT**:
   - Упрощение взаимодействия между зонами узлов.
   - NAT обеспечивает доступ контейнеров к интернету.

